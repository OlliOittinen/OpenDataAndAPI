<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fillaritilanne</title>
</head>
<body>
<div id="Current_situation"></div>
<script>
    var xmlhttp = new XMLHttpRequest();
    var bikeURL = "https://api.digitransit.fi/routing/v1/routers/hsl/bike_rental";
    xmlhttp.open("GET", bikeURL, true);
    xmlhttp.send();

    xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
        var bikes = JSON.parse(xmlhttp.responseText);
        getBikes(bikes.stations);
    }};

    function getBikes(arr) {
        var htmlTable = "<table border='1'>";
        htmlTable += "<th>" + "Asema" + "</th><th>" + "Pyöriä vapaana" + "</th><th>" + "Paikkoja vapaana" + "</th>";
        for (var i = 0; i < arr.length; i++) {
            htmlTable +=
                "<tr><td>" + arr[i].name + "</td>"
                + "<td>" + arr[i].bikesAvailable + "</td>"
                + "<td>" + arr[i].spacesAvailable + "</td></tr>";
        }
        htmlTable += "</table>";
        document.getElementById("Current_situation").innerHTML = htmlTable;
    }
</script>
</body>
</html>